<% @stylesheets << 'admin/reorder' %>
<% @javascripts << 'dragdrop' %>
<h1 id="reorder_pages">Reorder Pages</h1>

<p>Drag and drop pages to reorder. Click <strong>Finished</strong> when you are done.</p> 

<div id="reorder-page" class="page">
  <%= page_icon(@page) %> <%= @page.title %>
</div>

<ul id="children" class="pages">
<% for child in @children -%>
  <li id="item_<%= child.id %>" class="page"><%= page_icon(child) %> <%= child.title %></li>
<% end -%>
</ul>

<script type="text/javascript">
//<![CDATA[
Sortable.create("children", { onUpdate:function(){ $('sort_order').value = Sortable.sequence('children').join(',') } });
//]]>
</script>

<% form_tag do %>
  <p class="buttons"><%= submit_tag "Finished", :class => 'button' %> or <%= link_to 'Cancel', page_index_url %></p>
  <div><%= hidden_field_tag "sort_order" %></div>
<% end %>